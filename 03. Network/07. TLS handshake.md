## TLS/SSL handshake

> HTTPSλ” ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ κ°„μ ν†µμ‹ μ„ μ  3μκ°€ μΈμ¦ν•΄μ£Όμ–΄μ•Ό ν•λ‹¤. μΈμ¦μ€ CA(Certificate Authority)μ—μ„ λ‹΄λ‹Ήν•λ‹¤.  
CAλ” SSL(Secure Sockets Layer) μΈμ¦μ„λ΅ ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†ν• μ„λ²„κ°€ λ§λ”μ§€ ν™•μΈν•΄μ¤€λ‹¤. SSL μΈμ¦μ„λ΅ μ„λ²„κ°€ μ‹ λΆ°ν•  μ μλ”μ§€ νλ‹¨ν•κΈ° μ„ν•΄ κ³µκ°ν‚¤ μ„λ… λ°©μ‹μ„ μ‚¬μ©ν•λ”λ°, 
μ΄λ• μ„λ… λ°©μ‹μ„ SSL/TLS HandshakeλΌκ³  ν•λ‹¤.
<br>

### TLS/SSL handshakeμ—μ„ μ‚¬μ©ν•λ” μ•”νΈν™” λ°©μ‹

* κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹μ„ μ‚¬μ©ν•λ©°, λΉ„λ€μΉ­ μ•”νΈν™” λ°©μ‹μ΄λΌκ³ λ„ ν•λ‹¤.  
* SSL μΈμ¦μ„μ—λ” μ„λ²„μ κ³µκ°ν‚¤κ°€ λ‹΄κΈ°λ”λ° μ΄ μΈμ¦μ„λ” CAμ κ°μΈν‚¤λ΅ μ•”νΈν™” λλ‹¤.  
* λΈλΌμ°μ €λ” λ¨λ“  CAλ“¤μ κ³µκ°ν‚¤λ¥Ό κ°€μ§€κ³  μμ–΄ μΈμ¦μ„λ¥Ό λ³µνΈν™”ν•κ³  λ‚΄μ©μ„ λ³Ό μ μλ‹¤.
<br>

-----------

<br>

### TLS/SSL handshake κ³Όμ •


<br>

![image](https://user-images.githubusercontent.com/34904741/139517776-f2cac636-5ce5-4815-981d-33905283bf13.png)

<br>

### μ§„ν–‰ μμ„

1. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ—κ² `client hello` λ©”μ‹μ§€λ¥Ό λ‹΄μ•„ μ„λ²„λ΅ λ³΄λ‚Έλ‹¤.
   μ΄λ• μ•”νΈν™”λ μ •λ³΄λ¥Ό ν•¨κ» λ‹΄λ”λ°, `λ²„μ „`, `μ•”νΈ μ•κ³ λ¦¬μ¦`, `μ••μ¶• λ°©μ‹` λ“±μ„ λ‹΄λ”λ‹¤.

   <br>

2. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ μ•”νΈ μ•κ³ λ¦¬μ¦κ³Ό μ••μ¶• λ°©μ‹μ„ λ°›κ³ , `μ„Έμ… ID`μ™€ `CA κ³µκ° μΈμ¦μ„`λ¥Ό `server hello` λ©”μ‹μ§€μ™€ ν•¨κ» λ‹΄μ•„ μ‘λ‹µν•λ‹¤. μ΄ CA μΈμ¦μ„μ—λ” μ•μΌλ΅ ν†µμ‹  μ΄ν›„ μ‚¬μ©ν•  λ€μΉ­ν‚¤κ°€ μƒμ„±λκΈ° μ „, ν΄λΌμ΄μ–ΈνΈμ—μ„ handshake κ³Όμ • μ† μ•”νΈν™”μ— μ‚¬μ©ν•  κ³µκ°ν‚¤λ¥Ό λ‹΄κ³  μλ‹¤.

   <br>

3. ν΄λΌμ΄μ–ΈνΈ μΈ΅μ€ μ„λ²„μ—μ„ λ³΄λ‚Έ CA μΈμ¦μ„μ— λ€ν•΄ μ ν¨ν• μ§€ CA λ©λ΅μ—μ„ ν™•μΈν•λ” κ³Όμ •μ„ μ§„ν–‰ν•λ‹¤.

   <br>

4. CA μΈμ¦μ„μ— λ€ν• μ‹ λΆ°μ„±μ΄ ν™•λ³΄λμ—λ‹¤λ©΄, ν΄λΌμ΄μ–ΈνΈλ” λ‚μ λ°”μ΄νΈλ¥Ό μƒμ„±ν•μ—¬ μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•λ‹¤. μ΄ λ‚μ λ°”μ΄νΈλ” λ€μΉ­ν‚¤λ¥Ό μ •ν•λ”λ° μ‚¬μ©μ΄ λκ³ , μ•μΌλ΅ μ„λ΅ λ©”μ‹μ§€λ¥Ό ν†µμ‹ ν•  λ• μ•”νΈν™”ν•λ”λ° μ‚¬μ©λλ‹¤.

   <br>

5. λ§μ•½ 2λ² λ‹¨κ³„μ—μ„ μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈ μΈμ¦μ„λ¥Ό ν•¨κ» μ”κµ¬ν–λ‹¤λ©΄, ν΄λΌμ΄μ–ΈνΈμ μΈμ¦μ„μ™€ ν΄λΌμ΄μ–ΈνΈμ κ°μΈν‚¤λ΅ μ•”νΈν™”λ μ„μμ λ°”μ΄νΈ λ¬Έμμ—΄μ„ ν•¨κ» λ³΄λ‚΄μ¤€λ‹¤.

   <br>

6. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ μΈμ¦μ„λ¥Ό ν™•μΈ ν›„, λ‚μ λ°”μ΄νΈλ¥Ό μμ‹ μ κ°μΈν‚¤λ΅ λ³µνΈν™” ν›„ λ€μΉ­ λ§μ¤ν„° ν‚¤ μƒμ„±μ— ν™μ©ν•λ‹¤.

   <br>

7. ν΄λΌμ΄μ–ΈνΈλ” handshake κ³Όμ •μ΄ μ™„λ£λμ—λ‹¤λ” `finished` λ©”μ‹μ§€λ¥Ό μ„λ²„μ— λ³΄λ‚΄λ©΄μ„, μ§€κΈκΉμ§€ λ³΄λ‚Έ κµν™ λ‚΄μ—­λ“¤μ„ ν•΄μ‹± ν›„ κ·Έ κ°’μ„ λ€μΉ­ν‚¤λ΅ μ•”νΈν™”ν•μ—¬ κ°™μ΄ λ‹΄μ•„ λ³΄λ‚΄μ¤€λ‹¤.

   <br>

8. μ„λ²„λ„ λ™μΌν•κ² κµν™ λ‚΄μ©λ“¤μ„ ν•΄μ‹±ν• λ’¤ ν΄λΌμ΄μ–ΈνΈμ—μ„ λ³΄λ‚΄μ¤€ κ°’κ³Ό μΌμΉν•λ” μ§€ ν™•μΈν•λ‹¤. μΌμΉν•λ©΄ μ„λ²„λ„ λ§μ°¬κ°€μ§€λ΅  `finished` λ©”μ‹μ§€λ¥Ό μ΄λ²μ— λ§λ“  λ€μΉ­ν‚¤λ΅ μ•”νΈν™”ν•μ—¬ λ³΄λ‚Έλ‹¤.

   <br>

9. ν΄λΌμ΄μ–ΈνΈλ” ν•΄λ‹Ή λ©”μ‹μ§€λ¥Ό λ€μΉ­ν‚¤λ΅ λ³µνΈν™”ν•μ—¬ μ„λ΅ ν†µμ‹ μ΄ κ°€λ¥ν• μ‹ λΆ°λ°›μ€ μ‚¬μ©μλ€ κ±Έ μΈμ§€ν•κ³ , μ•μΌλ΅ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” ν•΄λ‹Ή λ€μΉ­ν‚¤λ΅ λ°μ΄ν„°λ¥Ό μ£Όκ³ λ°›μ„ μ μκ² λλ‹¤.

<br>

<br>

### π”—μ°Έκ³ λ§ν¬  

- [Link](https://wangin9.tistory.com/entry/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EC%97%90-URL-%EC%9E%85%EB%A0%A5-%ED%9B%84-%EC%9D%BC%EC%96%B4%EB%82%98%EB%8A%94-%EC%9D%BC%EB%93%A4-5TLSSSL-Handshake)  
- [Link](https://aws-hyoh.tistory.com/entry/HTTPS-%ED%86%B5%EC%8B%A0%EA%B3%BC%EC%A0%95-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-3SSL-Handshake)  
- [Link](https://www.ideatec.co.kr/SSL_view/?bmode=view&idx=6195635&back_url=&t=board&page=)